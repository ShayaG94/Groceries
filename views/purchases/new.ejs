<% layout("layouts/boilerplate") %>
<h1 class="text-primary text-center mb-2"><%= product.title %></h1>
<h2 class="text-primary text-center mb-3">Create Purchase:</h2>
<div class="d-flex justify-content-center text-primary">
    <form
        action="/products/<%= product.path %>/purchases"
        method="POST"
        class="d-flex flex-column bg-secondary px-4 py-3 rounded align-items-stretch"
    >
        <div class="d-flex justify-content-between flex-column flex-md-row mb-3">
            <div class="form-floating mb-2 mb-md-0">
                <input type="text" class="form-control bg-light" id="storeName" name="purchase[store][name]" placeholder="Store Name" required />
                <label for="storeName" class="form-label">Store Name</label>
            </div>
            <div class="form-floating">
                <input
                    type="text"
                    class="form-control bg-light mb-2 mb-md-0"
                    id="storeBranch"
                    name="purchase[store][branch]"
                    placeholder="Store Branch"
                />
                <label for="storeBranch" class="form-label">Store Branch</label>
            </div>
        </div>
        <div class="d-flex flex-row justify-content-center align-items-center mb-3">
            <label for="purchaseDate" class="form-label me-2">Purchase Date:</label>
            <input class="form-control bg-light" type="date" id="purchaseDate" name="purchase[purchaseDate]" required />
        </div>
        <div class="d-flex justify-content-between flex-column flex-md-row mb-3">
            <div class="input-group justify-content-center mb-2 mb-md-0">
                <input
                    type="number"
                    class="form-control bg-light flex-grow-0 w-60"
                    id="quantity"
                    name="purchase[quantity]"
                    step="0.001"
                    placeholder="Quantity"
                    required
                />
                <span class="input-group-text border-info bg-secondary capitalize"><%= product.measureUnit %></span>
            </div>
            <div class="input-group justify-content-center">
                <input
                    type="number"
                    class="form-control bg-light flex-grow-0 w-60"
                    id="price"
                    name="purchase[price]"
                    step="0.01"
                    placeholder="Price"
                    required
                />
                <span class="input-group-text border-info bg-secondary">&#8362;</span>
            </div>
        </div>
        <% if (product.trackUsagePeriod) { %>
        <div class="d-flex flex-column flex-md-row mb-3 justify-content-around">
            <div class="d-flex flex-column justify-content-center align-items-center mb-3">
                <label for="startConsDate" class="form-label me-md-2 mb-2 mb-md-0">Start Consumtion Date:</label>
                <input class="form-control bg-light" type="date" id="startConsDate" name="purchase[startConsDate]" />
            </div>
            <div class="d-flex flex-column justify-content-center align-items-center mb-3">
                <label for="endConsDate" class="form-label me-2">End Consumtion Date:</label>
                <input class="form-control bg-light" type="date" id="endConsDate" name="purchase[endConsDate]" />
            </div>
        </div>
        <% } %>
        <div class="d-flex flex-column flex-md-row mb-3">
            <a href="/products/<%= product.path %>?tab=purchases" class="btn btn-info mb-2 me-0 me-md-3 mb-md-0">Back to Perchases</a>
            <button class="btn btn-info" type="submit">Create Purchase</button>
        </div>
    </form>
</div>
