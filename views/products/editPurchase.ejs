<% layout("layouts/boilerplate") %>
<h1 class="text-primary text-center mb-2"><%= product.title %></h1>
<h2 class="text-primary text-center mb-3">Edit Purchase:</h2>
<div class="d-flex justify-content-center text-primary">
    <form
        action="/products/<%= product.path %>/purchases/<%= purchase._id %>?_method=PUT"
        method="POST"
        class="d-flex flex-column bg-secondary px-4 py-3 rounded align-items-stretch"
    >
        <div class="d-flex justify-content-between flex-column flex-md-row mb-3">
            <div class="form-floating mb-2 mb-md-0">
                <input
                    type="text"
                    class="form-control bg-light"
                    id="storeName"
                    name="purchase[store][name]"
                    value="<%= purchase.store.name %> "
                    required
                />
                <label for="storeName" class="form-label">Store Name</label>
            </div>
            <div class="form-floating">
                <input
                    type="text"
                    class="form-control bg-light mb-2 mb-md-0"
                    id="storeBranch"
                    name="purchase[store][branch]"
                    value="<%= purchase.store.branch %>"
                />
                <label for="storeBranch" class="form-label">Store Branch</label>
            </div>
        </div>
        <div class="d-flex flex-row justify-content-center align-items-center mb-3">
            <label for="purchaseDate" class="form-label me-2">Purchase Date:</label>
            <input
                class="form-control bg-light"
                type="date"
                id="purchaseDate"
                name="purchase[purchaseDate]"
                value="<%= inputifyDate(purchase.purchaseDate) %>"
                required
            />
        </div>
        <div class="d-flex justify-content-between flex-column flex-md-row mb-3">
            <div class="input-group justify-content-center mb-2 mb-md-0">
                <input
                    type="number"
                    class="form-control bg-light flex-grow-0 w-60"
                    id="quantity"
                    name="purchase[quantity]"
                    step="0.001"
                    value="<%= purchase.quantity %>"
                    required
                />
                <span class="input-group-text border-info bg-secondary capitalize"><%= product.measureUnit %></span>
            </div>
            <div class="input-group justify-content-center">
                <input
                    type="number"
                    class="form-control bg-light flex-grow-0 w-60"
                    id="price"
                    name="purchase[price]"
                    step="0.01"
                    value="<%= purchase.price %>"
                    required
                />
                <span class="input-group-text border-info bg-secondary">&#8362;</span>
            </div>
        </div>
        <% if (product.trackUsagePeriod) { %>
        <div class="d-flex flex-column flex-md-row mb-4 justify-content-around">
            <div class="d-flex flex-column justify-content-center align-items-center mb-2 mb-md-0">
                <label for="startConsDate" class="form-label me-md-2">Start Consumtion Date:</label>
                <input
                    class="form-control bg-light"
                    type="date"
                    id="startConsDate"
                    name="purchase[startConsDate]"
                    value="<%= inputifyDate(purchase.startConsDate) %>"
                />
            </div>
            <div class="d-flex flex-column justify-content-center align-items-center">
                <label for="endConsDate" class="form-label">End Consumtion Date:</label>
                <input
                    class="form-control bg-light"
                    type="date"
                    id="endConsDate"
                    name="purchase[endConsDate]"
                    value="<%= inputifyDate(purchase.endConsDate) %>"
                />
            </div>
        </div>
        <% } %>
        <div class="d-flex flex-column flex-md-row mb-3">
            <a href="/products/<%= product.path %>?tab=purchases" class="btn btn-info mb-2 me-0 me-md-3 mb-md-0">Back to Purchases</a>
            <button class="btn btn-info" type="submit">Update Purchase</button>
        </div>
    </form>
</div>
